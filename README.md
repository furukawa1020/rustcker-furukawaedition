# HATAKE Desktop (Rust Edition)

**A Docker Desktopâ€“compatible container platform, rebuilt from scratch in Rust.**

ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ : `furukawa-desktop`

---

## ã“ã‚Œã¯ä½•ã‹ï¼Ÿ

HATAKE Desktop ã¯ã€Docker Desktop ã®ä»£æ›¿ã¨ã—ã¦è¨­è¨ˆã•ã‚ŒãŸ Windows å‘ã‘ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚  
Docker Engine API v1.45 ã«äº’æ›ã—ãŸç‹¬è‡ªã‚¨ãƒ³ã‚¸ãƒ³ (`furukawad`) ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«æŒã¡ã€Tauriè£½ã®ãƒã‚¤ãƒ†ã‚£ãƒ–GUIã¨Docker CLIã®ä¸¡æ–¹ã‹ã‚‰æ“ä½œã§ãã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Tauri GUI (React/TS)       â”‚  â† ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ HTTP (Docker Engine API v1.45)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     furukawad  (Rust/Axum)     â”‚  â† APIã‚µãƒ¼ãƒãƒ¼ï¼‹ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã‚¨ãƒ³ã‚¸ãƒ³
â”‚  127.0.0.1:2375                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   WSL2 Runtime     â”‚  â† Linuxã‚³ãƒ³ãƒ†ãƒŠã‚’wsl.exe + chroot ã§å®Ÿè¡Œ
      â”‚   (wsl.exe)        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸»ãªç‰¹å¾´

- ğŸ¦€ **ãƒ•ãƒ«Rustå®Ÿè£…** â€” ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã¯ã™ã¹ã¦Rustã§æ›¸ã‹ã‚Œã¦ãŠã‚Šã€å‹å®‰å…¨ãªFSM (æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°) ã§ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†
- ğŸ³ **Docker API v1.45 äº’æ›** â€” `docker` CLI ã‹ã‚‰ãã®ã¾ã¾æ¥ç¶šå¯èƒ½
- ğŸªŸ **Windows Native** â€” ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ï¼ˆMSI/EXEï¼‰ã§é…å¸ƒ
- ğŸ§ **WSL2 Runtime** â€” Docker Hub ã‹ã‚‰ pull ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å±•é–‹ã—ã€WSL2å†…ã§å®Ÿè¡Œ
- ğŸ“¦ **Content Addressable Storage** â€” Dockeräº’æ›ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼æ–¹å¼ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¿å­˜

---

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- Windows 10/11 (x64)
- WSL2 ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ï¼ˆ`wsl --install` ã§æœ‰åŠ¹åŒ–ï¼‰
- Ubuntu ãªã©ã®WSL2ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ã†ï¼ˆæ¨å¥¨ï¼‰

ãƒ“ãƒ«ãƒ‰ã—ãŸä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

| å½¢å¼ | ãƒ‘ã‚¹ |
|------|------|
| MSI  | `c:\Projects\furukawa\target\release\bundle\msi\furukawa-desktop_0.1.0_x64_en-US.msi` |
| EXE  | `c:\Projects\furukawa\target\release\bundle\nsis\furukawa-desktop_0.1.0_x64-setup.exe` |

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ **Furukawa Desktop** ã‚’èµ·å‹•ã—ã¾ã™ã€‚

---

## é–‹ç™ºè€…å‘ã‘ãƒ“ãƒ«ãƒ‰æ‰‹é †

> âš ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚Œã‚‹ã¨Tauriãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã™ã‚‹ãŸã‚ã€**ã‚¹ãƒšãƒ¼ã‚¹ãªã—ã®ãƒ‘ã‚¹**ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ãã ã•ã„ã€‚

### 1. å‰æãƒ„ãƒ¼ãƒ«

```bash
# Rust (æœ€æ–°stable)
rustup update

# Node.js + npm
# https://nodejs.org/

# Tauri CLI
cargo install tauri-cli
```

### 2. ã‚·ãƒ£ãƒ‰ã‚¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ï¼ˆã‚¹ãƒšãƒ¼ã‚¹å¯¾ç­–ï¼‰

```powershell
robocopy "C:\Projects\rustckere furukawaedition" "C:\Projects\furukawa" /MIR /XD node_modules target .git /R:0 /W:0 /MT:16
cd C:\Projects\furukawa
```

### 3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰

```bash
cargo build --release -p furukawad
```

### 4. ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒã‚¤ãƒŠãƒªã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```powershell
cd desktop
powershell -ExecutionPolicy Bypass -File setup-binaries.ps1
```

### 5. ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰

```bash
npm install
npm run tauri build
```

ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã¯ `target/release/bundle/` ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

---

## ä½¿ã„æ–¹

### GUIã§ä½¿ã†

1. ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹ã¨ `furukawad` ã‚¨ãƒ³ã‚¸ãƒ³ãŒè‡ªå‹•èµ·å‹•ã—ã¾ã™
2. å·¦ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰å„æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼š
   - **Containers** â€” ã‚³ãƒ³ãƒ†ãƒŠã®ä½œæˆãƒ»èµ·å‹•ãƒ»åœæ­¢ãƒ»å‰Šé™¤
   - **Images** â€” Docker Hub ã‹ã‚‰ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ pullã€ä¸€è¦§ç¢ºèª

### Docker CLI ã§ä½¿ã†

`DOCKER_HOST` ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã ã‘ã§é€šå¸¸ã® `docker` ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã¾ã™ï¼š

```powershell
$env:DOCKER_HOST = "tcp://127.0.0.1:2375"

docker version        # ã‚¨ãƒ³ã‚¸ãƒ³æƒ…å ±ç¢ºèª
docker ps             # ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§
docker pull busybox   # ã‚¤ãƒ¡ãƒ¼ã‚¸å–å¾—
docker run busybox echo "hello from furukawa!"
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
crates/
â”œâ”€â”€ furukawa_common          # å…±é€šãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ»è¨ºæ–­ã‚¤ãƒ³ãƒ•ãƒ©
â”œâ”€â”€ furukawa_domain          # ã‚³ãƒ³ãƒ†ãƒŠFSMãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç´”Rustã€éåŒæœŸãªã—ï¼‰
â”œâ”€â”€ furukawa_infra_db        # SQLite æ°¸ç¶šåŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”œâ”€â”€ furukawa_infra_docker    # Docker Engine API v1.45 ã®å‹å®šç¾© (serde)
â”œâ”€â”€ furukawa_infra_fs        # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ãƒ‰ãƒ¬ãƒƒã‚µãƒ–ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†ï¼‰
â”œâ”€â”€ furukawa_infra_registry  # Docker Hub ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆèªè¨¼ãƒ»manifestãƒ»blobï¼‰
â””â”€â”€ furukawa_infra_runtime   # WSL2ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆwsl.exe + chroot + netsh portproxyï¼‰

wsl/
â””â”€â”€ furukawad/               # APIã‚µãƒ¼ãƒãƒ¼ï¼ˆAxumï¼‰+ ä¾å­˜æ€§æ³¨å…¥ã®ãƒ«ãƒ¼ãƒˆ

desktop/
â”œâ”€â”€ src/                     # Tauri ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (React + TypeScript)
â””â”€â”€ src-tauri/               # Tauri ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Rust) + ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼è¨­å®š
```

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Private / Internal use only.
